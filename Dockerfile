# Указываем базовый образ (самый свежий)
FROM node:20-alpine

# Устанавливаем рабочий каталог
WORKDIR /app

# Копируем файлы зависимости
COPY package.json .

# Устанавливаем зависимости
RUN npm install

# Копируем файл окружения (если необходимо)
# COPY .env.production

# Копируем остальные файлы вашего приложения
COPY . .

# Открываем порт 3000
EXPOSE 3000

# Собираем приложение
RUN npm run build

# Указываем команду для запуска приложения (как в production)
CMD ["npm", "start"]